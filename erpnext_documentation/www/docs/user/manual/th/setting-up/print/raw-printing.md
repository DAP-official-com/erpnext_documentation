<!-- add-breadcrumbs -->
# การพิมพ์ทั่วไป

> Introduced in Version 12

**การส่งชุดคำสั่งไปยังเครื่องพิมพ์โดยตรงในภาษาแม่เรียกว่าการพิมพ์ทั่วไป**

เครื่องพิมพ์เทอร์มอลจำนวนมากต้องการคำสั่งดิบเหล่านี้ที่ส่งถึงพวกเขาเพื่อทำหน้าที่ต่างๆ เช่น การพิมพ์บาร์โค้ด การพิมพ์ใบเสร็จ การพิมพ์ฉลาก ฯลฯ การพิมพ์แบบ Raw จะข้ามไดรเวอร์ของเครื่องพิมพ์ในกรณีส่วนใหญ่ ทำให้ทำงานได้รวดเร็วและเชื่อถือได้ Raw Printing ยังสามารถใช้คุณสมบัติขั้นสูงบางอย่าง เช่น การตัดกระดาษใบเสร็จรับเงิน การดึงลิ้นชักเก็บเงิน ฯลฯ

## 1. การตั้งค่าการพิมพ์ทั่วไปใน ERPNext

### 1.1 การติดตั้งแอปพลิเคชัน QZ Tray บนคอมพิวเตอร์

ดาวน์โหลดและติดตั้งแอปพลิเคชัน QZ Tray บนคอมพิวเตอร์ที่เชื่อมต่อเครื่องพิมพ์เทอร์มอลของคุณ โปรแกรมนี้สามารถพบได้ที่ของ [เว็บไซต์อย่างเป็นทางการ](https://qz.io/download/)ปัจจุบัน QZ Tray รองรับ Windows, macOS และ Linux ระหว่างการติดตั้ง คุณจะได้รับแจ้งให้ติดตั้ง Java หากยังไม่ได้ติดตั้ง โปรดติดตั้ง Java เพื่อสิ้นสุดการติดตั้ง

คำแนะนำเพิ่มเติมในการติดตั้งแอพลิเคชันถาด QZ สามารถ [ที่นี่](https://qz.io/wiki/using-qz-tray).

### 1.2 สร้างรูปแบบการพิมพ์คำสั่งการพิมพ์ข้อมูลทั่วไป

หากต้องการส่งคำสั่งดิบไปยังเครื่องพิมพ์ คุณต้องสร้างรูปแบบการพิมพ์ในคำสั่งดิบก่อน Jinja Templating ภาษาที่ใช้ในคำสั่งดิบเช่นเดียวกับใน [รูปแบบการพิมพ์ที่กำหนดเองแบบ HTML](/docs/user/manual/en/customize-erpnext/print-format).

ในการสร้างรูปแบบการพิมพ์ใหม่สำหรับการพิมพ์ทั่วไป:

1. ไปที่รายการรูปแบบการพิมพ์:  **หน้าหลัก > การตั้งค่า > การพิมพ์ > รูปแบบการพิมพ์**
2. คลิกใหม่
3. เลือกเอกสาร (DocType) ที่เกี่ยวข้อง
4. ตรวจสอบ**รูปแบบที่กำหนดเอง**และตัวเลือก**การพิมพ์ข้อมูลทั่วไป**
5. กรอกข้อมูลในฟิลด์ **คำสั่งทั่วไป** ด้วยคำสั่งดิบที่จำเป็นเพื่อส่งไปยังเครื่องพิมพ์
6. บันทึก

  ![Raw Commands Print Format]({{docs_base_url}}/assets/img/setup/print/raw-command-print-format.png)

ปัจจุบัน ภาษาของเครื่องพิมพ์ที่ใช้สตริงสามารถใช้ใน 'Raw Commands' ฟิลด์ในรูปแบบการพิมพ์ได้ การเขียนคำสั่งดิบต้องมีความรู้เกี่ยวกับภาษาแม่ของเครื่องพิมพ์ที่ผู้ผลิตเครื่องพิมพ์ให้มา โปรดดูคู่มือสำหรับนักพัฒนาที่จัดทำโดยผู้ผลิตเครื่องพิมพ์เกี่ยวกับวิธีการเขียนคำสั่งดั้งเดิม

### 1.3 เปิดใช้งานการพิมพ์ข้อมูลทั่วไปในการตั้งค่าการพิมพ์

ในการเปิดใช้งานการพิมพ์ข้อมูลทั่วไป:

1. ไปที่: **หน้าแรก > การตั้งค่า > การพิมพ์ > พิมพ์การตั้งค่า > การพิมพ์ข้อมูลทั่วไป**
2. ตรวจสอบการเปิดใช้งานตัวเลือก **การพิมพ์ข้อมูลทั่วไป**
3. บันทึก

## 2. วิธีการใช้การพิมพ์ข้อมูลทั่วไปใน ERPNext

มีสองวิธีในการส่งคำสั่ง "พิมพ์ข้อมูลทั่วไป" ไปยังเครื่องพิมพ์ของคุณ


### 2.1 การคลิกพิมพ์บนหน้ามุมมองการพิมพ์

ในการพิมพ์รูปแบบการพิมพ์คำสั่่งการพิมพ์ข้อมูลทั่วไปจากมุมมองการพิมพ์เอกสาร:

1. เลือกรูปแบบการพิมพ์ที่เหมาะสม สำหรับรูปแบบการพิมพ์ในคำสั่ง Raw ข้อความ "ไม่มีหน้าตัวอย่าง" จะแสดงแทนตัวอย่างก่อนพิมพ์
2. คลิกที่ปุ่มพิมพ์
3. โปรดอนุญาตการเชื่อมต่อจาก QZ Tray สำหรับการกระทำที่คุณเริ่มต้น (แป้นพิมพ์ลัด: Alt + A)
   -  ![QZ Tray Prompt]({{docs_base_url}}/assets/img/setup/print/qz-tray-prompt.png)
4. ระบบอาจขอให้คุณเลือก "รูปแบบการพิมพ์ - การแมปเครื่องพิมพ์"
   -  การแมปนี้ใช้เพื่อส่งคำสั่งพิมพ์ไปยังเครื่องพิมพ์ที่เหมาะสม
   -  ต้องติดตั้งเครื่องพิมพ์บนคอมพิวเตอร์ของคุณเพื่อให้สามารถแมปกับรูปแบบการพิมพ์ได้
     ![print format - printer mapping]({{docs_base_url}}/assets/img/setup/print/printer-settings.png)
   -  การแมปนี้ถูกจัดเก็บไว้ในคอมพิวเตอร์เครื่องเดียวกัน และจะต้องตั้งค่าในเครื่องไคลเอนต์แต่ละเครื่อง
   -  คุณยังสามารถแก้ไขได้โดยคลิกที่ปุ่มการ **ตั้งค่าเครื่องพิมพ์**

      ![Raw Printing from Print View]({{docs_base_url}}/assets/img/setup/print/raw-printing-from-print-view.gif)

### 2.2 การเรียกใช้ฟังก์ชัน Raw Print จากสคริปต์ที่กำหนดขึ้นมา

มักเป็นข้อกำหนดที่ต้องมีการออกคำสั่งพิมพ์ในเหตุการณ์บางอย่าง (เช่น ส่ง บันทึก แก้ไข ฯลฯ) เป็นไปได้ที่จะเขียน[สคริปต์ที่กำหนดขึ้นมา](/docs/user/manual/en/customize-erpnext/custom-scripts) เพื่อทำสิ่งนี้ให้กับคุณ

ฟังก์ชัน Raw Print ที่เกี่ยวข้อง:

1. ฟังก์ชัน: `frappe.ui.form.qz_connect`
  - การเชื่อมต่อ Wrapper เพื่อสร้างการเชื่อมต่อกับแอปพลิเคชัน QZ Tray
  - ส่งกลับคำสัญญาซึ่งแก้ไขเมื่อสร้างการเชื่อมต่อสำเร็จ
  - อนุญาตให้มีการเชื่อมต่อที่ใช้งานอยู่และไม่ได้ใช้งานเพื่อแก้ไขโดยไม่คำนึงถึง จึงสามารถเรียกได้ทุกครั้งก่อนส่งคำสั่ง
  - ตัวอย่างการใช้งาน:

```
    frappe.ui.form.qz_connect()
    .then(function () {
        return qz.print(config, data);
    })
    .then(frappe.ui.form.qz_success)
    .catch(err => {
        frappe.ui.form.qz_fail(err);
    });
```

`qz` คือส่วนกลางที่จัดทำโดย `qz-tray.js` library.

2. ฟังก์ชัน: `frappe.ui.form.qz_get_printer_list`
  - แสดงรายการเครื่องพิมพ์ที่ใช้ได้กับแอปพลิเคชัน QZ Tray
  - ส่งกลับคำสัญญาซึ่งแก้ไขรายการเครื่องพิมพ์
  
  ตัวอย่างการใช้งาน:
```
     frappe.ui.form.qz_get_printer_list().then(
           // Required action on getting the printer list.
           // Note: Printer list is a array of strings.
      );
```

3. ฟังก์ชัน: `frappe.ui.form.qz_success`
  - แสดง "พิมพ์ส่งไปยังเครื่องพิมพ์!" แจ้งเตือนไปยังผู้ใช้ สามารถเรียกได้หลังจากพิมพ์คำสั่งสำเร็จ

4. ฟังก์ชัน: `frappe.ui.form.qz_fail`
  - แสดงข้อความแสดงข้อผิดพลาดให้กับผู้ใช้ ควรถูกเรียกเมื่อการเชื่อมต่อ QZ Tray ล้มเหลว

คุณยังสามารถเข้าถึงฟังก์ชันที่qz-tray.jsห้องสมุดจัดเตรียมไว้ได้โดยตรงผ่านqzออบเจกต์ [คลิกที่นี่เพื่อดูเอกสาร qz-tray.js library](https://qz.io/api/). เอกสารห้องสมุด หมายเหตุ: qzอ็อบเจ็กต์จะเริ่มต้นได้หลังจากเรียก the frappe.ui.form.qz_connectเป็นครั้งแรกเท่านั้น ในกรณีที่คุณต้องการqzวัตถุก่อนหน้านั้น คุณสามารถใช้frappe.ui.form.qz_init

### 3. หัวข้อที่เกี่ยวข้อง
1. [การตั้งค่าการพิมพ์](/docs/user/manual/en/setting-up/print/print-settings)
1. [รูปแบบการพิมพ์](/docs/user/manual/en/setting-up/print/print-format)
1. [สไตล์การพิมพ์](/docs/user/manual/en/setting-up/print/print-style)
