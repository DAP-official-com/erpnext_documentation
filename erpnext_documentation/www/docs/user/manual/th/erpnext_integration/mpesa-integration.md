<!-- add-breadcrumbs -->
# การใช้ M-Pesa

**การรวม M-Pesa ช่วยให้ประมวลผลธุรกรรมกับผู้ให้บริการเกตเวย์การชำระเงิน M-Pesa**

การรวม M-Pesa อำนวยความสะดวกในการประมวลผลการชำระเงินระหว่างแอปพลิเคชัน M-Pesa และ ERPNext M-Pesa Integration ใช้งานได้กับ POS เพื่ออำนวยความสะดวกในการชำระเงินเท่านั้น คุณลักษณะนี้ใช้ไม่ได้กับตะกร้าสินค้า

ในการตั้งค่า M-Pesa ไปที่:
> บูรณาการ > การชำระเงิน > การตั้งค่า M-Pesa

## 1. จะรับข้อมูลรับรอง M-Pesa ของคุณได้อย่างไร
1. ในการเปิดใช้งานข้อมูลรับรอง API ของคุณ คุณต้องลงชื่อเข้าใช้บัญชี M-Pesa ของคุณ
2. จากนั้น เปิดส่วน Go Live ของแอปพลิเคชัน และทำตามขั้นตอนเพื่อขอรับการอนุมัติสำหรับแอป
3. เมื่อทุกกรณีทดสอบเป็นที่น่าพอใจและผลลัพธ์ที่คาดหวังตรงกับผลลัพธ์สุดท้าย คุณต้องส่งเอกสารและทำตามขั้นตอนเพื่อรับข้อมูลรับรองขั้นสุดท้ายสำหรับการสมัครของคุณ
4. รายละเอียดที่กล่าวถึงใน URL การผลิตและส่วนข้อมูลรับรองเป็นข้อมูลประจำตัวที่คุณควรใช้ในการตั้งค่า M-Pesa

<img class="screenshot" alt="Mpesa Credentials" src="{{docs_base_url}}/assets/img/setup/integrations/mpesa_credentials.png">


## 2.ตั้งค่า M-Pesa

ในการเปิดใช้งาน M-Pesa Express คุณต้องกำหนดค่าพารามิเตอร์บังคับทั้งหมดที่คุณได้รับจาก M-Pesa หากคุณต้องการใช้สภาวะแวดล้อม staging ของการผสานรวม คุณสามารถเลือกอ็อพชัน staging และใช้ staging credential ที่ M-Pesa จัดเตรียมไว้โดยการสร้างแอปพลิเคชันแยกต่างหากสำหรับที่เดียวกัน
<img class="screenshot" alt="Mpesa Settings" src="{{docs_base_url}}/assets/img/setup/integrations/mpesa_settings.png">

ในการเปิดใช้งาน M-Pesa ใน ERPNext ระบบจะสร้างบันทึกเกตเวย์การชำระเงินและส่วนหัวของบัญชีในผังบัญชีที่มีประเภทบัญชีเป็นธนาคารดังที่เห็นในภาพหน้าจอต่อไปนี้

<img class="screenshot" alt="Mpesa COA" src="{{docs_base_url}}/assets/img/setup/integrations/mpesa_coa.png">

<img class="screenshot" alt="Mpesa POS Settings" src="{{docs_base_url}}/assets/img/setup/integrations/mpesa_pos_settings.png">

นอกจากนี้ยังจะสร้างวิธีการการชำระเงินที่มีชื่อและบัญชีเดียวกันกับช่องทางการชำระเงิน พร้อมด้วยฟิลด์แบบกำหนดเองบางอย่างในการตั้งค่า POS เพื่อจัดการการชำระเงิน POS

<img class="screenshot" alt="Payment Gateway Account" src="{{docs_base_url}}/assets/img/setup/integrations/payment_gateway_account_mpesa.png">

หลังจากตั้งค่าบัญชี ช่องทางการชำระเงิน แล้ว คุณจะสามารถรับการชำระเงินออนไลน์ผ่าน M-Pesa ได้


## 3. การชำระเงิน POS M-Pesa

ในการตั้งค่าโปรไฟล์ POS ด้วยโหมดการชำระเงิน M-Pesa การชำระเงิน POS จะแสดงส่วนข้อมูลเพิ่มเติม ส่วนนี้ประกอบด้วยสองฟิลด์ที่ตั้งค่าโดยอัตโนมัติเมื่อเพิ่มการตั้งค่า M-Pesa

<img class="screenshot" alt="POS Additional Information" src="{{docs_base_url}}/assets/img/setup/integrations/additional-information.png">

ทันทีที่ผู้ใช้ POS กรอกหมายเลขโทรศัพท์มือถือของลูกค้า พวกเขาสามารถเริ่มต้นคำขอชำระเงินจากลูกค้าได้ คำขอจะถูกส่งไปยังแอปพลิเคชันมือถือ M-Pesa ของลูกค้าที่เชื่อมโยงกับหมายเลขโทรศัพท์มือถือที่ระบุ เมื่อผู้ใช้ประมวลผลการชำระเงินแล้ว ผู้ใช้จะได้รับข้อความแจ้งจากกล่องโต้ตอบการยืนยันเพื่อส่งการชำระเงิน

## 4. ยอดคงเหลือในบัญชี M-Pesa

สามารถดึงยอดเงินในบัญชีที่เชื่อมโยงกับ M-Pesa แต่ละรายการได้โดยใช้ปุ่มรับยอดคงเหลือในบัญชี การดำเนินการนี้จะโหลดรายละเอียดยอดเงินในบัญชี M-Pesa ในแดชบอร์ด

<img class="screenshot" alt="POS Account Balance" src="{{docs_base_url}}/assets/img/setup/integrations/mpesa_account_balance.png">


## 5. สกุลเงินที่รองรับการทำธุรกรรม

M-Pesa จะทำงานให้กับบริษัทที่มี KSH (ชิลลิงเคนยา) เป็นสกุลเงินของบริษัทเท่านั้น
