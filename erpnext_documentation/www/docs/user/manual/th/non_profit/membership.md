<!-- add-breadcrumbs -->
#สมาชิก

เอกสารประเภทสมาชิกช่วยให้คุณสามารถบันทึกรายละเอียดการเป็นสมาชิกสำหรับ **สมาชิก**

การเป็นสมาชิกเป็นคำที่อ้างถึงองค์กรใดๆ ที่อนุญาตให้ผู้คนสมัครสมาชิก และมักต้องการให้พวกเขาชำระค่าธรรมเนียมการเป็นสมาชิกหรือ "การสมัครสมาชิก"

## 1. วิธีสร้างสมาชิก

ในการสร้างสมาชิกใหม่ไปที่:

> องค์กรไม่แสวงหากำไร > การเป็นสมาชิก > ใหม่

<img class="screenshot" alt="Membership" src="{{docs_base_url}}/assets/img/non_profit/membership/membership.png">

**สมาชิก:** สมาชิกคือช่องลิงก์ที่ดึงรายละเอียดสมาชิกจาก doctype สมาชิก

**สถานะสมาชิก:** สถานะสมาชิกคือฟิลด์เลือกที่มีใหม่ ปัจจุบัน หมดอายุ รอดำเนินการ และยกเลิก สถานะหมดอายุจะอัปเดตโดยอัตโนมัติเมื่อระยะเวลาการเป็นสมาชิกหมดลง

**ส่วนรายละเอียดวันที่สมาชิก:** ส่วนนี้ประกอบด้วยข้อมูลที่เกี่ยวข้องกับวันที่เริ่มต้นการเป็นสมาชิก วันที่สิ้นสุด และสมาชิกตั้งแต่วันที่

**รายละเอียดการชำระเงิน:** ส่วนนี้มีรายละเอียดเกี่ยวกับการชำระเงิน หากช่องทำเครื่องหมายบุคคลที่ชำระเงินสำหรับการเป็นสมาชิกที่ชำระเงินแล้วถูกทำเครื่องหมายว่าถูกทำเครื่องหมายเป็นอย่างอื่นที่ไม่ได้ทำเครื่องหมาย จำนวนเงินจะถูกดึงตามประเภทการเป็นสมาชิก

## 2. คุณสมบัติ

## 2.1 สร้างใบแจ้งหนี้

หากคุณเลือก _เปิดใช้งานการออกใบแจ้งหนี้_ ในการตั้งค่าการเป็นสมาชิก คุณจะเห็นปุ่มสำหรับสร้างใบกำกับสินค้าจากแบบฟอร์มการเป็นสมาชิก

## 3. ชำระเงินค่าสมาชิกโดยใช้ RazorPay

สำหรับการชำระค่าสมาชิกแบบเป็นงวด คุณสามารถตั้งค่าการสมัครสมาชิก razorpay สำหรับสมาชิกได้ คุณสามารถดูคำแนะนำในการตั้งค่า razorpay ได้ [ที่นี่](/docs/user/manual/th/erpnext_integration/razorpay-integration)

> หมายเหตุ: คุณลักษณะนี้มีให้ในเวอร์ชัน 13 ขึ้นไปเท่านั้น

คุณสามารถทำตามขั้นตอนด้านล่างเพื่อตั้งค่าการสมัครสมาชิก Razorpay สำหรับการเป็นสมาชิก

1. ตั้งค่า RazorPay
1. ตั้งค่ารายละเอียดการเรียกเก็บเงิน
1. ตั้งค่าแผน
1. นำเข้าสมาชิกที่มีอยู่
1. ตั้งค่า RazorPay Webhook
1. ตั้งค่าเว็บไซต์

## 3.1 การตั้งค่าสมาชิก

คุณสามารถดูคำแนะนำในการตั้งค่า razorpay ได้ [ที่นี่](/docs/user/manual/th/erpnext_integration/razorpay-integration) คุณสามารถตั้งค่าการเรียกเก็บเงินในการตั้งค่าการเป็นสมาชิกในโมดูลองค์กรไม่แสวงหากำไร

<img class="screenshot" alt="Membership" src="{{docs_base_url}}/assets/img/non_profit/razorpay-enabled.png">

การตรวจสอบ _Enable RazorPay For Memberships_ จะแสดงตัวเลือกการกำหนดค่าเพิ่มเติม

- **รอบการเรียกเก็บเงิน**: นี่คือช่วงเวลาระหว่างการเรียกเก็บเงิน คุณสามารถเลือกการเรียกเก็บเงินรายเดือนหรือรายปี
- **ความถี่ในการเรียกเก็บเงิน**: จำนวนรอบการเรียกเก็บเงินที่ลูกค้าควรถูกเรียกเก็บเงิน ตัวอย่างเช่น หากลูกค้าซื้อการเป็นสมาชิก 1 ปีซึ่งควรเรียกเก็บเงินเป็นรายเดือน ค่านี้ควรเป็น 12

<img class="screenshot" alt="Membership" src="{{docs_base_url}}/assets/img/non_profit/membership/membership-settings.png">

มีการกำหนดค่าอื่นๆ สำหรับการออกใบแจ้งหนี้

- **เปิดใช้งานการออกใบแจ้งหนี้**: การตรวจสอบนี้จะเปิดใช้งานการสร้างใบแจ้งหนี้สำหรับการเป็นสมาชิกโดยใช้ปุ่ม **สร้างใบแจ้งหนี้**
- **สร้างใบแจ้งหนี้อัตโนมัติสำหรับเว็บฟอร์ม**: หากคุณมีการตั้งค่าเว็บฟอร์มแบบกำหนดเอง การเปิดใช้งานนี้จะสร้างใบแจ้งหนี้การขายโดยอัตโนมัติเมื่อมีการอนุมัติการชำระเงิน
- **ชำระเงิน**: สร้างรายการชำระเงินอัตโนมัติสำหรับใบแจ้งหนี้การขายที่สร้างจากการเป็นสมาชิกโดยใช้แบบฟอร์มบนเว็บ

การตรวจสอบ _เปิดใช้งานการออกใบแจ้งหนี้_ จะช่วยให้คุณสามารถกำหนดค่าบริษัทและบัญชีเดบิตสำหรับใบแจ้งหนี้ของคุณได้ การตรวจสอบ **ชำระเงิน** จะช่วยให้คุณสามารถกำหนดค่าบัญชีการชำระเงินได้

- **ส่งการตอบรับการเป็นสมาชิก**: หากเปิดใช้งาน คุณจะมีตัวเลือกในการส่งการตอบรับเกี่ยวกับการเป็นสมาชิกไปยังสมาชิกเมื่อมีการสร้างใบแจ้งหนี้
- **เทมเพลตอีเมล**: คุณสามารถกำหนดค่าเทมเพลตอีเมลสำหรับการตอบรับและตั้งค่าได้ที่นี่

หากเปิดใช้งาน _Send Membership Acknowledgement_ คุณสามารถเปิดใช้งาน _Send Invoice with Email_ เพื่อส่งใบแจ้งหนี้พร้อมกับการเป็นสมาชิกได้ คุณยังสามารถกำหนดค่ารูปแบบการพิมพ์สำหรับการเป็นสมาชิกและใบแจ้งหนี้ทีละรายการได้ที่นี่

## 3.2 การตั้งค่าแผน

ประเภทสมาชิกสอดคล้องกับแผน RazorPay ของคุณ คุณสามารถอ่านเพิ่มเติมเกี่ยวกับแผนการเป็นสมาชิกได้ [ที่นี่](/docs/user/manual/th/non_profit/membership_type)

<img class="screenshot" alt="Membership" src="{{docs_base_url}}/assets/img/non_profit/plan.png">

เมื่อเปิดใช้งานตัวเลือกการสมัครสมาชิก Razorpay คุณจะเห็นฟิลด์ **รหัสแผน** นี่คือที่ที่คุณสามารถเพิ่มรหัสแผนจาก Razorpay

> หมายเหตุ: คุณต้องเพิ่มแผนที่ใช้งานอยู่และแผนเดิมทั้งหมดเพื่อการเรียกเก็บเงินที่ราบรื่น

## 3.3 การนำเข้าสมาชิก

หากคุณมีสมาชิกอยู่แล้ว คุณสามารถนำเข้าโดยใช้ [เครื่องมือนำเข้าข้อมูล](/docs/user/manual/th/setting-up/data/data-import) นี่คือ[วิดีโอสอน](https://www.youtube.com/watch?v=WlGD35DM5LI) ของสิ่งเดียวกัน

คุณต้องนำเข้าสมาชิกด้วยฟิลด์ต่อไปนี้

1. **ชื่อสมาชิก**: ชื่อเต็มของสมาชิก
1. **ประเภทสมาชิก**: ชื่อของแผนงานที่สมัครไว้
1. **ที่อยู่อีเมล**: ID อีเมลที่ใช้สำหรับการทำธุรกรรมของ Razorpay
1. **รหัสการสมัครสมาชิก**: รหัสการสมัครสมาชิกที่ RazorPay . ให้มา
1. **รหัสลูกค้า**: รหัสการสมัครสมาชิกที่ RazorPay . ให้มา
1. **สมาชิก PAN**: เป็นตัวเลือก

> หมายเหตุ: การสมัครสมาชิก RazorPay จะถูกติดตามสำหรับสมาชิกที่มีข้อมูลอยู่ในรายชื่อสมาชิกเท่านั้น

นี่คือลักษณะของสมาชิกใน ERPNext
<img class="screenshot" alt="Membership" src="{{docs_base_url}}/assets/img/non_profit/member.png">


## 3.4 การตั้งค่า webhook

คุณสามารถตั้งค่าเว็บฮุคจากแดชบอร์ด RazorPay ในการตั้งค่า คุณสามารถอ่านเพิ่มเติมเกี่ยวกับเว็บฮุคใน RazorPay ได้ [ที่นี่](https://razorpay.com/docs/webhooks/) เว็บฮุคนี้จะแจ้งไซต์ ERPNext ของคุณทุกครั้งที่มีการสร้างหรือต่ออายุการสมัครใหม่

<img class="screenshot" alt="Membership" src="{{docs_base_url}}/assets/img/non_profit/razorpay-webhook.png">

You will need the following details to set up the webhook.

### 3.4.1 Webhook URL

ต่อไปนี้คือ URL สำหรับไซต์ ERPNext ของคุณ นี่คือจุดสิ้นสุด RazorPay จะใช้เพื่อแจ้งกิจกรรมที่เกี่ยวข้องกับการสมัครรับข้อมูล

```sh
https://<your-site>/api/method/erpnext.non_profit.doctype.membership.membership.trigger_razorpay_subscription
```

### 3.4.2 กิจกรรม

คุณต้องเปิดใช้งานเหตุการณ์ "subscription.activated" และ "subscription.charged"

### 3.4.3 ใช้งานอยู่
เลือกตัวเลือกนี้เพื่อเปิดใช้งาน Webhook

ด้วยวิธีนี้ Webhook ของคุณจะถูกเปิดใช้งาน

## 3.5 เรียกการสมัครใหม่จากเว็บไซต์ของคุณ

คุณสามารถใช้ [การรวมฝั่งไคลเอ็นต์ของ RazorPay](https://razorpay.com/docs/payment-gateway/web-integration/) เพื่อตั้งค่าการชำระเงินบนไซต์ของคุณ ในการดำเนินการดังกล่าว คุณจะต้องสร้างคำสั่งซื้อการสมัครใช้งานด้วย RazorPay ก่อน ซึ่งคุณสามารถเรียกชำระเงินได้

ในการสร้างคำสั่งซื้อการสมัคร คุณสามารถใช้ปลายทาง `create_member_subscription_order` ใน ERPNext

คุณสามารถส่งคำขอ POST ได้ที่จุดสิ้นสุดต่อไปนี้

```sh
https://<your-site>/api/method/erpnext.non_profit.doctype.member.member.create_member_subscription_order
```

อาร์กิวเมนต์ที่จะส่งผ่านคือพจนานุกรมที่มีรายละเอียดสมาชิก

```javascript
{
	"plan_id": "Foundation Starter" // Plan name as detailed in Membership Type
	"fullname": "John Doe",
	"mobile": "7506000000",
	"email": "jane@example.com",
	"pan": "Testing123"
}
```

เมื่อสร้างสำเร็จ สมาชิกและลูกค้าจะถูกสร้างขึ้นโดยอัตโนมัติ จุดสิ้นสุดจะส่งคืน JSON ดังนี้

```javascript
{
	'subscription_details': {
		'plan_id': 'plan_EXwyxDYDCj3X4v',
		'customer_notify': 1
	},
	'subscription_id': 'sub_EZycCvXFvqnC6p'
}
```

คุณสามารถใช้ `subscription_id` เพื่อเรียกชำระเงินได้

{next}
